digraph G {
  rankdir = "RL";
  node [shape = rect, fontname = "sans-serif"];
  subgraph "cluster_module.dev_network" {
    label = "module.dev_network"
    fontname = "sans-serif"
    "module.dev_network.data.aws_availability_zones.available" [label="data.aws_availability_zones.available"];
    "module.dev_network.aws_internet_gateway.gw" [label="aws_internet_gateway.gw"];
    "module.dev_network.aws_route_table.public" [label="aws_route_table.public"];
    "module.dev_network.aws_route_table_association.public" [label="aws_route_table_association.public"];
    "module.dev_network.aws_subnet.private" [label="aws_subnet.private"];
    "module.dev_network.aws_subnet.public" [label="aws_subnet.public"];
    "module.dev_network.aws_vpc.main" [label="aws_vpc.main"];
  }
  subgraph "cluster_module.iot_monitoring" {
    label = "module.iot_monitoring"
    fontname = "sans-serif"
    "module.iot_monitoring.data.aws_caller_identity.current" [label="data.aws_caller_identity.current"];
    "module.iot_monitoring.data.aws_region.current" [label="data.aws_region.current"];
    "module.iot_monitoring.aws_iam_role.firehose" [label="aws_iam_role.firehose"];
    "module.iot_monitoring.aws_iam_role_policy.firehose_policy" [label="aws_iam_role_policy.firehose_policy"];
    "module.iot_monitoring.aws_kinesis_firehose_delivery_stream.archive" [label="aws_kinesis_firehose_delivery_stream.archive"];
    "module.iot_monitoring.aws_kinesis_stream.iot_data" [label="aws_kinesis_stream.iot_data"];
    "module.iot_monitoring.aws_kms_key.s3" [label="aws_kms_key.s3"];
    "module.iot_monitoring.aws_s3_bucket.iot_archive" [label="aws_s3_bucket.iot_archive"];
    "module.iot_monitoring.aws_s3_bucket_versioning.iot_archive" [label="aws_s3_bucket_versioning.iot_archive"];
    "module.iot_monitoring.aws_sns_topic.iot_alerts" [label="aws_sns_topic.iot_alerts"];
    "module.iot_monitoring.aws_sns_topic_subscription.email_alert" [label="aws_sns_topic_subscription.email_alert"];
    "module.iot_monitoring.aws_timestreamwrite_database.iot" [label="aws_timestreamwrite_database.iot"];
    "module.iot_monitoring.aws_timestreamwrite_table.sensors" [label="aws_timestreamwrite_table.sensors"];
  }
  "module.dev_network.aws_internet_gateway.gw" -> "module.dev_network.aws_vpc.main";
  "module.dev_network.aws_route_table.public" -> "module.dev_network.aws_internet_gateway.gw";
  "module.dev_network.aws_route_table_association.public" -> "module.dev_network.aws_route_table.public";
  "module.dev_network.aws_route_table_association.public" -> "module.dev_network.aws_subnet.public";
  "module.dev_network.aws_subnet.private" -> "module.dev_network.data.aws_availability_zones.available";
  "module.dev_network.aws_subnet.private" -> "module.dev_network.aws_vpc.main";
  "module.dev_network.aws_subnet.public" -> "module.dev_network.data.aws_availability_zones.available";
  "module.dev_network.aws_subnet.public" -> "module.dev_network.aws_vpc.main";
  "module.iot_monitoring.aws_iam_role_policy.firehose_policy" -> "module.iot_monitoring.aws_iam_role.firehose";
  "module.iot_monitoring.aws_iam_role_policy.firehose_policy" -> "module.iot_monitoring.aws_kinesis_stream.iot_data";
  "module.iot_monitoring.aws_iam_role_policy.firehose_policy" -> "module.iot_monitoring.aws_s3_bucket.iot_archive";
  "module.iot_monitoring.aws_kinesis_firehose_delivery_stream.archive" -> "module.iot_monitoring.data.aws_region.current";
  "module.iot_monitoring.aws_kinesis_firehose_delivery_stream.archive" -> "module.iot_monitoring.aws_iam_role.firehose";
  "module.iot_monitoring.aws_kinesis_firehose_delivery_stream.archive" -> "module.iot_monitoring.aws_kinesis_stream.iot_data";
  "module.iot_monitoring.aws_kinesis_firehose_delivery_stream.archive" -> "module.iot_monitoring.aws_s3_bucket.iot_archive";
  "module.iot_monitoring.aws_s3_bucket.iot_archive" -> "module.iot_monitoring.data.aws_caller_identity.current";
  "module.iot_monitoring.aws_s3_bucket.iot_archive" -> "module.iot_monitoring.aws_kms_key.s3";
  "module.iot_monitoring.aws_s3_bucket_versioning.iot_archive" -> "module.iot_monitoring.aws_s3_bucket.iot_archive";
  "module.iot_monitoring.aws_sns_topic_subscription.email_alert" -> "module.iot_monitoring.aws_sns_topic.iot_alerts";
  "module.iot_monitoring.aws_timestreamwrite_table.sensors" -> "module.iot_monitoring.aws_timestreamwrite_database.iot";
}
