{"format_version":"1.2","terraform_version":"1.9.2","planned_values":{"root_module":{"child_modules":[{"resources":[{"address":"module.dev_network.aws_internet_gateway.gw","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"dev-igw"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Name":"dev-igw","Owner":"APP Team"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.dev_network.aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"dev-public-rt"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Name":"dev-public-rt","Owner":"APP Team"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.dev_network.aws_route_table_association.public[0]","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.dev_network.aws_subnet.private[0]","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","cidr_block":"10.20.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"dev-private-0"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Name":"dev-private-0","Owner":"APP Team"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.dev_network.aws_subnet.private[1]","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","cidr_block":"10.20.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"dev-private-1"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Name":"dev-private-1","Owner":"APP Team"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.dev_network.aws_subnet.public[0]","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","cidr_block":"10.20.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"dev-public-0"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Name":"dev-public-0","Owner":"APP Team"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.dev_network.aws_subnet.public[1]","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","cidr_block":"10.20.3.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"dev-public-1"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Name":"dev-public-1","Owner":"APP Team"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.dev_network.aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.20.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Environment":"dev","ManagedBy":"Terraform","Name":"dev-vpc"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","ManagedBy":"Terraform","Name":"dev-vpc","Owner":"APP Team"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.dev_network"},{"resources":[{"address":"module.iot_monitoring.aws_iam_role.firehose","mode":"managed","type":"aws_iam_role","name":"firehose","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"firehose.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"dev-iot-firehose-role","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.iot_monitoring.aws_iam_role_policy.firehose_policy","mode":"managed","type":"aws_iam_role_policy","name":"firehose_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"firehose-delivery-policy"},"sensitive_values":{}},{"address":"module.iot_monitoring.aws_kinesis_firehose_delivery_stream.archive","mode":"managed","type":"aws_kinesis_firehose_delivery_stream","name":"archive","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"destination":"extended_s3","elasticsearch_configuration":[],"extended_s3_configuration":[{"buffering_interval":300,"buffering_size":128,"compression_format":"UNCOMPRESSED","custom_time_zone":"UTC","data_format_conversion_configuration":[{"enabled":true,"input_format_configuration":[{"deserializer":[{"hive_json_ser_de":[],"open_x_json_ser_de":[{"case_insensitive":true,"column_to_json_key_mappings":null,"convert_dots_in_json_keys_to_underscores":false}]}]}],"output_format_configuration":[{"serializer":[{"orc_ser_de":[],"parquet_ser_de":[{"block_size_bytes":268435456,"compression":"SNAPPY","enable_dictionary_compression":false,"max_padding_bytes":0,"page_size_bytes":1048576,"writer_version":"V1"}]}]}],"schema_configuration":[{"database_name":"iot_default","region":"eu-west-2","table_name":"iot_raw_parquet","version_id":"LATEST"}]}],"dynamic_partitioning_configuration":[],"error_output_prefix":"errors/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/","file_extension":null,"kms_key_arn":null,"prefix":"raw/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/","processing_configuration":[],"s3_backup_configuration":[],"s3_backup_mode":"Disabled"}],"http_endpoint_configuration":[],"iceberg_configuration":[],"kinesis_source_configuration":[{}],"msk_source_configuration":[],"name":"dev-iot-to-s3-parquet","opensearch_configuration":[],"opensearchserverless_configuration":[],"redshift_configuration":[],"server_side_encryption":[],"snowflake_configuration":[],"splunk_configuration":[],"tags":{"Environment":"dev"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team"},"timeouts":null},"sensitive_values":{"elasticsearch_configuration":[],"extended_s3_configuration":[{"cloudwatch_logging_options":[],"data_format_conversion_configuration":[{"input_format_configuration":[{"deserializer":[{"hive_json_ser_de":[],"open_x_json_ser_de":[{}]}]}],"output_format_configuration":[{"serializer":[{"orc_ser_de":[],"parquet_ser_de":[{}]}]}],"schema_configuration":[{}]}],"dynamic_partitioning_configuration":[],"processing_configuration":[],"s3_backup_configuration":[]}],"http_endpoint_configuration":[],"iceberg_configuration":[],"kinesis_source_configuration":[{}],"msk_source_configuration":[],"opensearch_configuration":[],"opensearchserverless_configuration":[],"redshift_configuration":[],"server_side_encryption":[],"snowflake_configuration":[],"splunk_configuration":[],"tags":{},"tags_all":{}}},{"address":"module.iot_monitoring.aws_kinesis_stream.iot_data","mode":"managed","type":"aws_kinesis_stream","name":"iot_data","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"encryption_type":"NONE","enforce_consumer_deletion":false,"kms_key_id":null,"name":"dev-iot-data-stream","retention_period":24,"shard_count":50,"shard_level_metrics":null,"tags":{"Environment":"dev","Purpose":"iot-real-time-ingestion"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team","Purpose":"iot-real-time-ingestion"},"timeouts":null},"sensitive_values":{"stream_mode_details":[],"tags":{},"tags_all":{}}},{"address":"module.iot_monitoring.aws_kms_key.s3","mode":"managed","type":"aws_kms_key","name":"s3","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":30,"description":"KMS key for Terraform state","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":null,"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team"},"timeouts":null,"xks_key_id":null},"sensitive_values":{"tags_all":{}}},{"address":"module.iot_monitoring.aws_s3_bucket.iot_archive","mode":"managed","type":"aws_s3_bucket","name":"iot_archive","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bucket":"dev-iot-archive-715841360340","force_destroy":true,"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":"aws:kms"}],"bucket_key_enabled":true}]}],"tags":{"Environment":"dev","Purpose":"iot-cold-storage"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team","Purpose":"iot-cold-storage"},"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[],"website":[]}},{"address":"module.iot_monitoring.aws_s3_bucket_versioning.iot_archive","mode":"managed","type":"aws_s3_bucket_versioning","name":"iot_archive","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]}},{"address":"module.iot_monitoring.aws_sns_topic.iot_alerts","mode":"managed","type":"aws_sns_topic","name":"iot_alerts","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"archive_policy":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"kms_master_key_id":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"name":"dev-iot-alerts","sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null,"tags":{"Environment":"dev"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.iot_monitoring.aws_sns_topic_subscription.email_alert[0]","mode":"managed","type":"aws_sns_topic_subscription","name":"email_alert","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"confirmation_timeout_in_minutes":1,"delivery_policy":null,"endpoint":"joejo201770@gmail.com","endpoint_auto_confirms":false,"filter_policy":null,"protocol":"email","raw_message_delivery":false,"redrive_policy":null,"replay_policy":null,"subscription_role_arn":null},"sensitive_values":{}},{"address":"module.iot_monitoring.aws_timestreamwrite_database.iot","mode":"managed","type":"aws_timestreamwrite_database","name":"iot","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"database_name":"iot_monitoring_dev","tags":{"Environment":"dev","Purpose":"iot-hot-path"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team","Purpose":"iot-hot-path"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.iot_monitoring.aws_timestreamwrite_table.sensors","mode":"managed","type":"aws_timestreamwrite_table","name":"sensors","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"database_name":"iot_monitoring_dev","retention_properties":[{"magnetic_store_retention_period_in_days":365,"memory_store_retention_period_in_hours":24}],"table_name":"sensors","tags":{"Environment":"dev"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team"}},"sensitive_values":{"magnetic_store_write_properties":[],"retention_properties":[{}],"schema":[],"tags":{},"tags_all":{}}}],"address":"module.iot_monitoring"}]}},"resource_changes":[{"address":"module.dev_network.aws_internet_gateway.gw","module_address":"module.dev_network","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"dev-igw"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Name":"dev-igw","Owner":"APP Team"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_network.aws_route_table.public","module_address":"module.dev_network","mode":"managed","type":"aws_route_table","name":"public","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"0.0.0.0/0","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Name":"dev-public-rt"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Name":"dev-public-rt","Owner":"APP Team"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.dev_network.aws_route_table_association.public[0]","module_address":"module.dev_network","mode":"managed","type":"aws_route_table_association","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.dev_network.aws_subnet.private[0]","module_address":"module.dev_network","mode":"managed","type":"aws_subnet","name":"private","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","cidr_block":"10.20.0.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"dev-private-0"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Name":"dev-private-0","Owner":"APP Team"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_network.aws_subnet.private[1]","module_address":"module.dev_network","mode":"managed","type":"aws_subnet","name":"private","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","cidr_block":"10.20.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"dev-private-1"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Name":"dev-private-1","Owner":"APP Team"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_network.aws_subnet.public[0]","module_address":"module.dev_network","mode":"managed","type":"aws_subnet","name":"public","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2a","cidr_block":"10.20.2.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"dev-public-0"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Name":"dev-public-0","Owner":"APP Team"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_network.aws_subnet.public[1]","module_address":"module.dev_network","mode":"managed","type":"aws_subnet","name":"public","index":1,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-west-2b","cidr_block":"10.20.3.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"dev-public-1"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Name":"dev-public-1","Owner":"APP Team"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.dev_network.aws_vpc.main","module_address":"module.dev_network","mode":"managed","type":"aws_vpc","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.20.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Environment":"dev","ManagedBy":"Terraform","Name":"dev-vpc"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","ManagedBy":"Terraform","Name":"dev-vpc","Owner":"APP Team"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.iot_monitoring.aws_iam_role.firehose","module_address":"module.iot_monitoring","mode":"managed","type":"aws_iam_role","name":"firehose","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"firehose.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"dev-iot-firehose-role","path":"/","permissions_boundary":null,"tags":null,"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.iot_monitoring.aws_iam_role_policy.firehose_policy","module_address":"module.iot_monitoring","mode":"managed","type":"aws_iam_role_policy","name":"firehose_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"firehose-delivery-policy"},"after_unknown":{"id":true,"name_prefix":true,"policy":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iot_monitoring.aws_kinesis_firehose_delivery_stream.archive","module_address":"module.iot_monitoring","mode":"managed","type":"aws_kinesis_firehose_delivery_stream","name":"archive","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"destination":"extended_s3","elasticsearch_configuration":[],"extended_s3_configuration":[{"buffering_interval":300,"buffering_size":128,"compression_format":"UNCOMPRESSED","custom_time_zone":"UTC","data_format_conversion_configuration":[{"enabled":true,"input_format_configuration":[{"deserializer":[{"hive_json_ser_de":[],"open_x_json_ser_de":[{"case_insensitive":true,"column_to_json_key_mappings":null,"convert_dots_in_json_keys_to_underscores":false}]}]}],"output_format_configuration":[{"serializer":[{"orc_ser_de":[],"parquet_ser_de":[{"block_size_bytes":268435456,"compression":"SNAPPY","enable_dictionary_compression":false,"max_padding_bytes":0,"page_size_bytes":1048576,"writer_version":"V1"}]}]}],"schema_configuration":[{"database_name":"iot_default","region":"eu-west-2","table_name":"iot_raw_parquet","version_id":"LATEST"}]}],"dynamic_partitioning_configuration":[],"error_output_prefix":"errors/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/","file_extension":null,"kms_key_arn":null,"prefix":"raw/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/","processing_configuration":[],"s3_backup_configuration":[],"s3_backup_mode":"Disabled"}],"http_endpoint_configuration":[],"iceberg_configuration":[],"kinesis_source_configuration":[{}],"msk_source_configuration":[],"name":"dev-iot-to-s3-parquet","opensearch_configuration":[],"opensearchserverless_configuration":[],"redshift_configuration":[],"server_side_encryption":[],"snowflake_configuration":[],"splunk_configuration":[],"tags":{"Environment":"dev"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team"},"timeouts":null},"after_unknown":{"arn":true,"destination_id":true,"elasticsearch_configuration":[],"extended_s3_configuration":[{"bucket_arn":true,"cloudwatch_logging_options":true,"data_format_conversion_configuration":[{"input_format_configuration":[{"deserializer":[{"hive_json_ser_de":[],"open_x_json_ser_de":[{}]}]}],"output_format_configuration":[{"serializer":[{"orc_ser_de":[],"parquet_ser_de":[{}]}]}],"schema_configuration":[{"catalog_id":true,"role_arn":true}]}],"dynamic_partitioning_configuration":[],"processing_configuration":[],"role_arn":true,"s3_backup_configuration":[]}],"http_endpoint_configuration":[],"iceberg_configuration":[],"id":true,"kinesis_source_configuration":[{"kinesis_stream_arn":true,"role_arn":true}],"msk_source_configuration":[],"opensearch_configuration":[],"opensearchserverless_configuration":[],"redshift_configuration":[],"server_side_encryption":[],"snowflake_configuration":[],"splunk_configuration":[],"tags":{},"tags_all":{},"version_id":true},"before_sensitive":false,"after_sensitive":{"elasticsearch_configuration":[],"extended_s3_configuration":[{"cloudwatch_logging_options":[],"data_format_conversion_configuration":[{"input_format_configuration":[{"deserializer":[{"hive_json_ser_de":[],"open_x_json_ser_de":[{}]}]}],"output_format_configuration":[{"serializer":[{"orc_ser_de":[],"parquet_ser_de":[{}]}]}],"schema_configuration":[{}]}],"dynamic_partitioning_configuration":[],"processing_configuration":[],"s3_backup_configuration":[]}],"http_endpoint_configuration":[],"iceberg_configuration":[],"kinesis_source_configuration":[{}],"msk_source_configuration":[],"opensearch_configuration":[],"opensearchserverless_configuration":[],"redshift_configuration":[],"server_side_encryption":[],"snowflake_configuration":[],"splunk_configuration":[],"tags":{},"tags_all":{}}}},{"address":"module.iot_monitoring.aws_kinesis_stream.iot_data","module_address":"module.iot_monitoring","mode":"managed","type":"aws_kinesis_stream","name":"iot_data","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"encryption_type":"NONE","enforce_consumer_deletion":false,"kms_key_id":null,"name":"dev-iot-data-stream","retention_period":24,"shard_count":50,"shard_level_metrics":null,"tags":{"Environment":"dev","Purpose":"iot-real-time-ingestion"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team","Purpose":"iot-real-time-ingestion"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"stream_mode_details":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"stream_mode_details":[],"tags":{},"tags_all":{}}}},{"address":"module.iot_monitoring.aws_kms_key.s3","module_address":"module.iot_monitoring","mode":"managed","type":"aws_kms_key","name":"s3","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":30,"description":"KMS key for Terraform state","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":null,"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team"},"timeouts":null,"xks_key_id":null},"after_unknown":{"arn":true,"id":true,"key_id":true,"multi_region":true,"policy":true,"rotation_period_in_days":true,"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.iot_monitoring.aws_s3_bucket.iot_archive","module_address":"module.iot_monitoring","mode":"managed","type":"aws_s3_bucket","name":"iot_archive","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bucket":"dev-iot-archive-715841360340","force_destroy":true,"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":"aws:kms"}],"bucket_key_enabled":true}]}],"tags":{"Environment":"dev","Purpose":"iot-cold-storage"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team","Purpose":"iot-cold-storage"},"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":true}]}]}],"tags":{},"tags_all":{},"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}],"tags":{},"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.iot_monitoring.aws_s3_bucket_versioning.iot_archive","module_address":"module.iot_monitoring","mode":"managed","type":"aws_s3_bucket_versioning","name":"iot_archive","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]}}},{"address":"module.iot_monitoring.aws_sns_topic.iot_alerts","module_address":"module.iot_monitoring","mode":"managed","type":"aws_sns_topic","name":"iot_alerts","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"archive_policy":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"kms_master_key_id":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"name":"dev-iot-alerts","sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null,"tags":{"Environment":"dev"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team"}},"after_unknown":{"arn":true,"beginning_archive_time":true,"fifo_throughput_scope":true,"id":true,"name_prefix":true,"owner":true,"policy":true,"signature_version":true,"tags":{},"tags_all":{},"tracing_config":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.iot_monitoring.aws_sns_topic_subscription.email_alert[0]","module_address":"module.iot_monitoring","mode":"managed","type":"aws_sns_topic_subscription","name":"email_alert","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"confirmation_timeout_in_minutes":1,"delivery_policy":null,"endpoint":"joejo201770@gmail.com","endpoint_auto_confirms":false,"filter_policy":null,"protocol":"email","raw_message_delivery":false,"redrive_policy":null,"replay_policy":null,"subscription_role_arn":null},"after_unknown":{"arn":true,"confirmation_was_authenticated":true,"filter_policy_scope":true,"id":true,"owner_id":true,"pending_confirmation":true,"topic_arn":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iot_monitoring.aws_timestreamwrite_database.iot","module_address":"module.iot_monitoring","mode":"managed","type":"aws_timestreamwrite_database","name":"iot","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"database_name":"iot_monitoring_dev","tags":{"Environment":"dev","Purpose":"iot-hot-path"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team","Purpose":"iot-hot-path"}},"after_unknown":{"arn":true,"id":true,"kms_key_id":true,"table_count":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.iot_monitoring.aws_timestreamwrite_table.sensors","module_address":"module.iot_monitoring","mode":"managed","type":"aws_timestreamwrite_table","name":"sensors","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"database_name":"iot_monitoring_dev","retention_properties":[{"magnetic_store_retention_period_in_days":365,"memory_store_retention_period_in_hours":24}],"table_name":"sensors","tags":{"Environment":"dev"},"tags_all":{"CostCenter":"CC-12345","Environment":"dev","Owner":"APP Team"}},"after_unknown":{"arn":true,"id":true,"magnetic_store_write_properties":true,"retention_properties":[{}],"schema":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"magnetic_store_write_properties":[],"retention_properties":[{}],"schema":[],"tags":{},"tags_all":{}}}}],"prior_state":{"format_version":"1.0","terraform_version":"1.9.2","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.dev_network.data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["eu-west-2-zg-1"],"id":"eu-west-2","names":["eu-west-2a","eu-west-2b","eu-west-2c"],"state":null,"timeouts":null,"zone_ids":["euw2-az2","euw2-az3","euw2-az1"]},"sensitive_values":{"group_names":[false],"names":[false,false,false],"zone_ids":[false,false,false]}}],"address":"module.dev_network"},{"resources":[{"address":"module.iot_monitoring.data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"715841360340","arn":"arn:aws:iam::715841360340:user/jochan","id":"715841360340","user_id":"AIDA2NK3YKHKID5XH5PVI"},"sensitive_values":{}},{"address":"module.iot_monitoring.data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Europe (London)","endpoint":"ec2.eu-west-2.amazonaws.com","id":"eu-west-2","name":"eu-west-2"},"sensitive_values":{}}],"address":"module.iot_monitoring"}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 5.70","expressions":{"default_tags":[{"tags":{"references":["local.mandatory_tags"]}}],"region":{"constant_value":"eu-west-2"}}},"aws.eu-west-2":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","alias":"eu-west-2","version_constraint":"~\u003e 5.70","expressions":{"default_tags":[{"tags":{"references":["local.mandatory_tags"]}}],"region":{"constant_value":"eu-west-2"}}}},"root_module":{"module_calls":{"dev_network":{"source":"../../../modules/vpc","expressions":{"env":{"constant_value":"dev"},"vpc_id":{"constant_value":"10.20.0.0/16"}},"module":{"outputs":{"private_subnets":{"expression":{"references":["aws_subnet.private"]},"description":"List of IDs of private subnets"},"public_subnets":{"expression":{"references":["aws_subnet.public"]},"description":"List of IDs of public subnets"},"vpc_id":{"expression":{"references":["aws_vpc.main.id","aws_vpc.main"]},"description":"The ID of the VPC"}},"resources":[{"address":"aws_internet_gateway.gw","mode":"managed","type":"aws_internet_gateway","name":"gw","provider_config_key":"aws","expressions":{"tags":{"references":["var.env"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_route_table.public","mode":"managed","type":"aws_route_table","name":"public","provider_config_key":"aws","expressions":{"route":{"references":["aws_internet_gateway.gw.id","aws_internet_gateway.gw"]},"tags":{"references":["var.env"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":0},{"address":"aws_route_table_association.public","mode":"managed","type":"aws_route_table_association","name":"public","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.public.id","aws_route_table.public"]},"subnet_id":{"references":["aws_subnet.public","count.index"]}},"schema_version":0,"count_expression":{"constant_value":1}},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available.names","data.aws_availability_zones.available","count.index"]},"cidr_block":{"references":["var.vpc_id","count.index"]},"tags":{"references":["var.env","count.index"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1,"count_expression":{"constant_value":2}},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"aws","expressions":{"availability_zone":{"references":["data.aws_availability_zones.available.names","data.aws_availability_zones.available","count.index"]},"cidr_block":{"references":["var.vpc_id","count.index"]},"tags":{"references":["var.env","count.index"]},"vpc_id":{"references":["aws_vpc.main.id","aws_vpc.main"]}},"schema_version":1,"count_expression":{"constant_value":2}},{"address":"aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.vpc_id"]},"enable_dns_hostnames":{"constant_value":true},"tags":{"references":["var.env","var.env"]}},"schema_version":1},{"address":"data.aws_availability_zones.available","mode":"data","type":"aws_availability_zones","name":"available","provider_config_key":"aws","schema_version":0}],"variables":{"env":{"description":"Environment that you are using"},"vpc_id":{"description":"vpc_cidr"}}}},"iot_monitoring":{"source":"../../../modules/iot_monitor","expressions":{"alert_email":{"constant_value":"joejo201770@gmail.com"},"env":{"constant_value":"dev"},"kinesis_shard_count":{"constant_value":50},"private_subnets":{"references":["module.dev_network.private_subnets","module.dev_network"]},"timestream_database_name":{"constant_value":"iot_monitoring_dev"},"vpc_id":{"references":["module.dev_network.vpc_id","module.dev_network"]}},"module":{"resources":[{"address":"aws_iam_role.firehose","mode":"managed","type":"aws_iam_role","name":"firehose","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"references":["local.prefix"]}},"schema_version":0},{"address":"aws_iam_role_policy.firehose_policy","mode":"managed","type":"aws_iam_role_policy","name":"firehose_policy","provider_config_key":"aws","expressions":{"name":{"constant_value":"firehose-delivery-policy"},"policy":{"references":["aws_s3_bucket.iot_archive.arn","aws_s3_bucket.iot_archive","aws_kinesis_stream.iot_data.arn","aws_kinesis_stream.iot_data"]},"role":{"references":["aws_iam_role.firehose.id","aws_iam_role.firehose"]}},"schema_version":0},{"address":"aws_kinesis_firehose_delivery_stream.archive","mode":"managed","type":"aws_kinesis_firehose_delivery_stream","name":"archive","provider_config_key":"aws","expressions":{"destination":{"constant_value":"extended_s3"},"extended_s3_configuration":[{"bucket_arn":{"references":["aws_s3_bucket.iot_archive.arn","aws_s3_bucket.iot_archive"]},"buffering_interval":{"references":["local.firehose_buffer_interval"]},"buffering_size":{"references":["local.firehose_buffer_size"]},"data_format_conversion_configuration":[{"enabled":{"constant_value":true},"input_format_configuration":[{"deserializer":[{"open_x_json_ser_de":[{}]}]}],"output_format_configuration":[{"serializer":[{"parquet_ser_de":[{"compression":{"constant_value":"SNAPPY"}}]}]}],"schema_configuration":[{"database_name":{"constant_value":"iot_default"},"region":{"references":["data.aws_region.current.name","data.aws_region.current"]},"role_arn":{"references":["aws_iam_role.firehose.arn","aws_iam_role.firehose"]},"table_name":{"constant_value":"iot_raw_parquet"}}]}],"error_output_prefix":{"constant_value":"errors/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/"},"prefix":{"constant_value":"raw/year=!{timestamp:yyyy}/month=!{timestamp:MM}/day=!{timestamp:dd}/"},"role_arn":{"references":["aws_iam_role.firehose.arn","aws_iam_role.firehose"]}}],"kinesis_source_configuration":[{"kinesis_stream_arn":{"references":["aws_kinesis_stream.iot_data.arn","aws_kinesis_stream.iot_data"]},"role_arn":{"references":["aws_iam_role.firehose.arn","aws_iam_role.firehose"]}}],"name":{"references":["local.prefix"]},"tags":{"references":["var.env"]}},"schema_version":1},{"address":"aws_kinesis_stream.iot_data","mode":"managed","type":"aws_kinesis_stream","name":"iot_data","provider_config_key":"aws","expressions":{"name":{"references":["local.prefix"]},"retention_period":{"constant_value":24},"shard_count":{"references":["var.kinesis_shard_count"]},"tags":{"references":["var.env"]}},"schema_version":1},{"address":"aws_kms_key.s3","mode":"managed","type":"aws_kms_key","name":"s3","provider_config_key":"aws","expressions":{"deletion_window_in_days":{"constant_value":30},"description":{"constant_value":"KMS key for Terraform state"},"enable_key_rotation":{"constant_value":true}},"schema_version":0},{"address":"aws_s3_bucket.iot_archive","mode":"managed","type":"aws_s3_bucket","name":"iot_archive","provider_config_key":"aws","expressions":{"bucket":{"references":["local.prefix","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]},"force_destroy":{"references":["var.env"]},"server_side_encryption_configuration":[{"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["aws_kms_key.s3.arn","aws_kms_key.s3"]},"sse_algorithm":{"constant_value":"aws:kms"}}],"bucket_key_enabled":{"constant_value":true}}]}],"tags":{"references":["var.env"]}},"schema_version":0},{"address":"aws_s3_bucket_versioning.iot_archive","mode":"managed","type":"aws_s3_bucket_versioning","name":"iot_archive","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.iot_archive.id","aws_s3_bucket.iot_archive"]},"versioning_configuration":[{"status":{"constant_value":"Enabled"}}]},"schema_version":0},{"address":"aws_sns_topic.iot_alerts","mode":"managed","type":"aws_sns_topic","name":"iot_alerts","provider_config_key":"aws","expressions":{"name":{"references":["local.prefix"]},"tags":{"references":["var.env"]}},"schema_version":0},{"address":"aws_sns_topic_subscription.email_alert","mode":"managed","type":"aws_sns_topic_subscription","name":"email_alert","provider_config_key":"aws","expressions":{"endpoint":{"references":["var.alert_email"]},"protocol":{"constant_value":"email"},"topic_arn":{"references":["aws_sns_topic.iot_alerts.arn","aws_sns_topic.iot_alerts"]}},"schema_version":0,"count_expression":{"references":["var.alert_email"]}},{"address":"aws_timestreamwrite_database.iot","mode":"managed","type":"aws_timestreamwrite_database","name":"iot","provider_config_key":"aws","expressions":{"database_name":{"references":["local.timestream_db_name"]},"tags":{"references":["var.env"]}},"schema_version":0},{"address":"aws_timestreamwrite_table.sensors","mode":"managed","type":"aws_timestreamwrite_table","name":"sensors","provider_config_key":"aws","expressions":{"database_name":{"references":["aws_timestreamwrite_database.iot.database_name","aws_timestreamwrite_database.iot"]},"retention_properties":[{"magnetic_store_retention_period_in_days":{"constant_value":365},"memory_store_retention_period_in_hours":{"constant_value":24}}],"table_name":{"constant_value":"sensors"},"tags":{"references":["var.env"]}},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"aws","schema_version":0}],"variables":{"alert_email":{"default":null,"description":"Email address for receiving IoT anomaly alerts"},"env":{"description":"Environment name (dev, staging, prod)"},"kinesis_shard_count":{"default":20,"description":"Number of shards for Kinesis Data Stream"},"private_subnets":{"description":"List of private subnet IDs"},"timestream_database_name":{"default":null,"description":"Name of the Timestream database"},"vpc_id":{"description":"VPC ID where resources will be deployed"}}}}}}},"relevant_attributes":[{"resource":"module.iot_monitoring.aws_s3_bucket.iot_archive","attribute":["id"]},{"resource":"module.iot_monitoring.aws_s3_bucket.iot_archive","attribute":["arn"]},{"resource":"module.iot_monitoring.data.aws_region.current","attribute":["name"]},{"resource":"module.iot_monitoring.aws_timestreamwrite_database.iot","attribute":["database_name"]},{"resource":"module.iot_monitoring.aws_kinesis_stream.iot_data","attribute":["arn"]},{"resource":"module.iot_monitoring.aws_iam_role.firehose","attribute":["id"]},{"resource":"module.dev_network.data.aws_availability_zones.available","attribute":["names"]},{"resource":"module.dev_network.aws_route_table.public","attribute":["id"]},{"resource":"module.iot_monitoring.aws_sns_topic.iot_alerts","attribute":["arn"]},{"resource":"module.dev_network.aws_vpc.main","attribute":["id"]},{"resource":"module.dev_network.aws_internet_gateway.gw","attribute":["id"]},{"resource":"module.iot_monitoring.aws_kms_key.s3","attribute":["arn"]},{"resource":"module.iot_monitoring.data.aws_caller_identity.current","attribute":["account_id"]},{"resource":"module.dev_network.aws_subnet.public","attribute":[]},{"resource":"module.iot_monitoring.aws_iam_role.firehose","attribute":["arn"]},{"resource":"module.dev_network.aws_subnet.private","attribute":[]}],"timestamp":"2026-01-09T08:52:53Z","applyable":true,"complete":true,"errored":false}
